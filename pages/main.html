<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/mainStyle.css">
    <link rel="stylesheet" href="../css/subStyle.css">
    <link rel="stylesheet" href="../css/popup.css">
    <script src="../js/jquery-3.6.3.min.js"></script>
    <script src="../js/common.js"></script>
    <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=h4haw5yh2n"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.36.0/apexcharts.min.js"></script>
    <title>원격검침시스템</title>
</head>
<body>
    <!-- 반복영역 건너뛰기 -->
    <div id="skipNav">
        <a href="#main">본문 바로가기</a>
    </div>
    <!-- //반복영역 건너뛰기 -->
    <div id="wrap">
        <div id="left-menu">
            <h1 id="logo"><a href="./main.html"><img src="../images/main/main_logo.svg" alt="원격검침시스템"></a></h1>
            <nav id="gnb">
                <ul class="one-depth">
                    <li class="d1">
                        <a href="#none"><span>수용가관리</span></a>
                        <ul class="two-depth">
                            <li><a href="./MENU-02-01-001.html">수용가리스트</a></li>
                            <li><a href="./MENU-02-01-004.html">수용가등록</a></li>
                        </ul>
                    </li>
                    <li class="d1">
                        <a href="#none"><span>계량기관리</span></a>
                        <ul class="two-depth">
                            <li><a href="">계량기리스트</a></li>
                            <li><a href="">계량기등록</a></li>
                        </ul>
                    </li>
                    <li class="d1">
                        <a href="#none"><span>검침구역그룹관리</span></a>
                        <ul class="two-depth">
                            <li><a href="">검침구역그룹리스트</a></li>
                            <li><a href="">검침구역그룹등록</a></li>
                        </ul>
                    </li>
                    <li class="d1">
                        <a href="#none"><span>검침구역관리</span></a>
                        <ul class="two-depth">
                            <li><a href="">검침구역리스트</a></li>
                            <li><a href="">검침구역등록</a></li>
                        </ul>
                    </li>
                    <li class="d1">
                        <a href="#none"><span>사용자관리</span></a>
                        <ul class="two-depth">
                            <li><a href="">사용자리스트</a></li>
                            <li><a href="">사용자등록</a></li>
                        </ul>
                    </li>
                    <li class="d1">
                        <a href="#none"><span>검침정보관리</span></a>
                        <ul class="two-depth">
                            <li><a href="./MENU-07-01-001.html">검침정보리스트</a></li>
                            <li><a href="./MENU-07-01-004.html">검침정보등록</a></li>
                            <li><a href="">검침정보다운로드(DAT)</a></li>
                        </ul>
                    </li>
                    <li class="d1">
                        <a href="#none"><span>공통관리</span></a>
                        <ul class="two-depth">
                            <li><a href="">공통코드리스트</a></li>
                        </ul>
                    </li>
                    <li class="d1">
                        <a href="#none"><span>통계</span></a>
                        <ul class="two-depth">
                            <li><a href="#none">사용량통계</a></li>
                            <li><a href="./MENU-09-02-001.html">검침현황통계</a></li>
                        </ul>
                    </li>
                    <li class="d1">
                        <a href="#none"><span>공지사항</span></a>
                        <ul class="two-depth">
                            <li><a href="">공지사항</a></li>
                            <li><a href="">공지사항등록</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div id="setmenu">
                <a href="./login.html" class="logout">
                    <img src="../images/button/ic_logout.svg" alt="로그아웃">
                    <span>로그아웃</span>
                </a>
                <a href="#none" class="setting popup-button" data-target="#settingAdd">
                    <img src="../images/button/ic_setting.svg" alt="환경관리">
                    <span>환경관리</span>
                </a>
            </div>
        </div>
        <main id="main-wrap">
            <h2 class="main-title">DASHBOARD</h2>
            <div class="main-content-wrap">
                <div class="main-content-left">
                    <div class="left-cont-01 mb24">
                        <a class="stat-01" href="./MENU-02-01-001.html">
                            <span>수용가</span>
                            <p>25,534</p>
                        </a>
                        <a class="stat-02">
                            <span>계량기</span>
                            <p>38,275</p>
                        </a>
                        <a class="stat-03">
                            <span>원격검침</span>
                            <p>25,534</p>
                        </a>
                    </div>
                    <div class="left-cont-02 mb24">
                        <div class="map-header">
                            <h4 class="main-sub-title">지도현황</h4>
                            <div class="map-select">
                                <label class="mr10"><input type="radio" name="mapOt" id="mapOt1" checked><span>전체</span></label>
                                <label><input type="radio" name="mapOt" id="mapOt2"><span>수용가</span></label>
                                <label><input type="radio" name="mapOt" id="mapOt3"><span>계량기</span></label>
                                <label><input type="radio" name="mapOt" id="mapOt4"><span>원격검침</span></label>
                            </div>
                        </div>
                        <div class="map-body" id="map">
                            <div class="map-info">
                                <span>계량기정보</span>
                                <div class="map-info-title">
                                    <strong>고흥읍 성촌2길 16</strong>
                                    <span>사용</span>
                                </div>
                                <ul class="map-info-text">
                                    <li><span>수용가 번호:</span><em>001-020-000100-00-0</em></li>
                                    <li><span>수용가명:</span><em>마을회관</em></li>
                                    <li><span>계량기 번호:</span><em>22-118553</em></li>
                                    <li><span>계량기 종류:</span><em>직독식</em></li>
                                    <li><span>계량기 형식:</span><em>습식</em></li>
                                    <li><span>구경명:</span><em>13mm</em></li>
                                    <li><span>설치일자:</span><em>2021-07-22</em></li>
                                    <li><span>자가검침:</span><em>사용</em></li>
                                    <li><span>위치정보:</span><em>있음</em></li>
                                </ul>
                                <a href="#none" class="detail-link">상세 정보</a>
                            </div>
                        </div>
                    </div>
                    <!-- 공지사항 컨텐츠가 없는 경우 해당 영역 삭제:s -->
                    <div class="left-cont-03">
                        <h4 class="main-sub-title">공지사항</h4>
                        <a href="#none" class="main-notice">
                            <h6 class="main-notice-title">업데이트 (Ver.2) 안내</h6>
                            <p class="main-notice-text over2lines">어플 버전이 Ver.2 버전으로 업데이트 되었습니다 . 어플을 종료 후 재접속을 하시면 업데이트 진행 하실수 있습니다.
                                <br>- 인정조정에 따라 금월사용량을 직접입력 할수 있도록 수정 - 해당 인정조정코드 (인정, 교체, 회전) - 금월사용량이 마이너스(-)인 경우
                            </p>
                            <span class="main-notice-date">2024-01-31</span>
                        </a>
                        <a href="#none" class="more-view"></a>
                    </div>
                    <!-- 공지사항 컨텐츠가 없는 경우 해당 영역 삭제:e -->
                </div>
                <div class="main-content-right">
                    <div class="right-cont mb24">
                        <div class="rc-header">
                            <h4 class="main-sub-title">검침현황통계</h4>
                            <div class="month-select">
                                <select>
                                    <option value="1월">1월</option>
                                    <option value="2월">2월</option>
                                    <option value="3월">3월</option>
                                    <option value="4월">4월</option>
                                    <option value="5월">5월</option>
                                    <option value="6월">6월</option>
                                    <option value="7월">7월</option>
                                    <option value="8월">8월</option>
                                    <option value="9월">9월</option>
                                    <option value="10월">10월</option>
                                    <option value="11월">11월</option>
                                    <option value="12월">12월</option>
                                </select>
                                <span class="ic_arrow"></span>
                            </div>
                        </div>
                        <div class="rc-body" id="RateChart">

                        </div>
                        <a href="#none" class="more-view"></a>
                    </div>
                    <div class="right-cont">
                        <div class="rc-header">
                            <h4 class="main-sub-title">사용량통계</h4>
                            <div class="prd-select">
                                <label><input type="radio" name="prdOt" id="prd1" checked><span>월별</span></label>
                                <label><input type="radio" name="prdOt" id="prd2"><span>년별</span></label>
                            </div>
                        </div>
                        <div class="rc-body" id="PeopleChart">
                            
                        </div>
                        <a href="#none" class="more-view"></a>
                    </div>
                </div>
            </div>
            <footer id="footer-sub" class="mb0 pt24">
                <p>(54851) 전라북도 전주시 덕진구 기린대로 1025, 3층 전북지역협력단</p>
                <p>Copyright © K-water All Rights Reserved.</p>
            </footer>
            
        </main>



        <!-- 환경설정등록 팝업 시작 -->
        <div id="settingAdd" class="popup-panel">
            <div class="popup-bg"></div>
            <div class="popup-content popup-content-settingAdd">
                <div class="popup-header">
                    <h2>환경설정 등록</h2>
                    <a class="close-button" href="#none"></a>
                </div>
                <div class="popup-body flex-col">
                    
                    <div class="board-title borderT">
                    </div>
                    <!-- 환경설정등록 테이블:s -->
                    <table class="popup-table">
                        <caption class="hide">환경설정등록 리스트</caption>
                        <colgroup>
                            <col style="width: 157px;">
                            <col>
                        </colgroup>
                        <tbody>
                            <tr>
                                <th scope="row">검침제한반경</th>
                                <td>
                                    <div class="input-type-row">
                                        <input type="text" class="s-size"> m
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">검침년월</th>
                                <td>
                                    <div class="input-type-row">
                                        <label for="type1">
                                            <select name="type1" class="s-size">
                                                <option>2024년</option>
                                                <option>2023년</option>
                                                <option>2022년</option>
                                                <option>2021년</option>
                                                <option>2020년</option>
                                            </select>
                                        </label>
                                        <span>~</span>
                                        <label for="type2">
                                            <select name="type2" class="s-size">
                                                <option>5월</option>
                                                <option>4월</option>
                                                <option>3월</option>
                                                <option>2월</option>
                                                <option>1월</option>
                                                <option>12월</option>
                                                <option>11월</option>
                                                <option>10월</option>
                                                <option>9월</option>
                                                <option>8월</option>
                                                <option>7월</option>
                                                <option>6월</option>
                                            </select>
                                        </label>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- 환경설정등록 테이블:e -->
                </div>
                <div class="popup-btn-wrap">
                    <div class="btn-wrap">
                        <!-- <input type="button" value="삭제" class="btn-delete"> -->
                        <input type="button" value="등록" class="btn-blue">
                        <input type="button" value="닫기" class="btn-gray close-button">
                    </div>
                </div>
            </div>
        </div>
        <!-- 환경설정등록 팝업 끝 -->


        
    </div>

    <script>
        var mapOptions = {
            center: new naver.maps.LatLng(35.8038441, 126.8805381),
            zoom: 15
        };
        
        var marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(35.8038441, 126.8805381),
            map: map
        });

        var map = new naver.maps.Map('map', mapOptions);

        // const mapRef = useRef<naver.maps.Map | null>(null);

        // 검침현황통계 Chart Start
        $(document).ready(function () {         
            new ApexCharts($("#RateChart")[0], {
                series: [{
                    name: '검침률',
                    data: [27, 62, 47, 28, 80, 100, 12, 54, 86, 33, 41, 26, 63]
                }],
                chart: {
                    type: 'bar',
                    height: '88%', 
                    toolbar: {
                        show: false,
                    }
                },
                plotOptions: {
                    bar: {
                        borderRadius: 4,
                        borderRadiusApplication: 'end',
                        horizontal: true,
                    },
                },
                dataLabels: {
                    enabled: false
                },
                fill: {
                    opacity: 1,
                    colors: ['#5DCFA5']
                },
                xaxis: {
                    categories: ['포두면', '동일면', '점암면', '영남면', '과역면-001', '남양면', '대서면',
                        '봉래면-001', '봉래면-002', '도양읍-001', '도양읍-002', '금산면-001', '금산면-002'
                    ]
                },
                tooltip: {
                    y: {
                        formatter: function (val) {
                            return val + "%"
                        }
                    }
                },
                toolbar: {
                    show: true
                }
            }).render();
            // 검침현황통계 Chart End
        
            
            //사용량통계 Chart Start
            new ApexCharts($("#PeopleChart")[0], {
                series: [{
                    name: '사용량',
                    data: [
                        349041, 377759, 325686, 347017, 351697, 378830, 388733, 461412, 423437, 407766, 371873, 362509
                    ]
                }],
                chart: {
                    type: 'area',
                    height: '88%',
                    zoom: {
                        enabled: false
                    }, 
                    toolbar: {
                        show: false,
                    }
                }, 
                plotOptions : {
                    bar : {
                        horizontal : true
                        , dataLabels : {
                            hideOverflowingLabels : false // bar 간격이 좁아서 data가 보이지 않을 때
                        }
                    }
                },
                dataLabels: {
                    enabled: true,
                    formatter : function(val) {
                        if (parseInt(val) >= 1000) {
                            return val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); // 천단위 콤마
                        } else {
                            return val.toFixed(0).toString();
                        }
                    }
                },
                stroke: {
                    curve: 'straight'
                },
                xaxis: {
                    categories: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월']
                },
                tooltip: {
                    x: {
                        formatter: function (val) {
                            if (val >= 1000) {
                                val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "," + "월 사용량"); // 천단위 콤마
                            } else {
                                return val + "월 사용량"
                            }
                        }
                    }
                },
                legend: {
                    horizontalAlign: 'left'
                }
            }).render();
            //사용량통계 Chart End
            
        });
    </script>
</body>
</html>